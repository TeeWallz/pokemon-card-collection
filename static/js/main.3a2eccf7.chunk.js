(this["webpackJsonppokemon-collection-client"]=this["webpackJsonppokemon-collection-client"]||[]).push([[0],{165:function(e,t,a){},170:function(e,t,a){},407:function(e,t){},409:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(19),r=a.n(s),o=(a(165),a(10)),i=a(11),l=a(8),d=a(13),u=a(14),h=a(18),j=a(17),b=a(6),m=(a(169),a(170),a(59)),O=a.n(m),v=a(37),g=a.n(v),f=a(60),p=a.n(f),x="REGISTER_SUCCESS",C="REGISTER_FAIL",k="LOGIN_SUCCESS",y="LOGIN_FAIL",N="LOGOUT",S="SET_MESSAGE",w="CLEAR_MESSAGE",T=a(21),A=a.n(T),F=a(66).API_BASE_URL+"auth/",I=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"login",value:function(e,t){return A.a.post(F+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,a){return A.a.post(F+"signup",{username:e,email:t,password:a})}}]),e}()),_=a(1),E=function(e){if(!e)return Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},L=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleLogin=n.handleLogin.bind(Object(l.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(l.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(l.a)(n)),n.state={username:"",password:"",loading:!1},n}return Object(i.a)(a,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),this.form.validateAll();var a,n,c=this.props,s=c.dispatch;c.history;0===this.checkBtn.context._errors.length?s((a=this.state.username,n=this.state.password,function(e){return I.login(a,n).then((function(t){return e({type:k,payload:{user:t}}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:y}),e({type:S,payload:a}),Promise.reject()}))})).then((function(){window.location.reload()})).catch((function(){t.setState({loading:!1})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoggedIn,n=t.message;return a?Object(_.jsx)(b.a,{to:"/profile"}):Object(_.jsx)(c.a.Fragment,{children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("div",{className:"card card-container",children:[Object(_.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(_.jsxs)(O.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"username",children:"Username"}),Object(_.jsx)(g.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[E]})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"password",children:"Password"}),Object(_.jsx)(g.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[E]})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsxs)("button",{className:"btn btn-primary btn-block",disabled:this.state.loading,children:[this.state.loading&&Object(_.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(_.jsx)("span",{children:"Login"})]})}),n&&Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:n})}),Object(_.jsx)(p.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})})}}]),a}(n.Component);var B=Object(h.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,message:e.message.message}}))(L),R=a(154),P=function(e){if(!e)return Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},U=function(e){if(!Object(R.isEmail)(e))return Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},D=function(e){if(e.length<3||e.length>20)return Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},M=function(e){if(e.length<6||e.length>40)return Object(_.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleRegister=n.handleRegister.bind(Object(l.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(l.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(l.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(l.a)(n)),n.state={username:"",email:"",password:"",successful:!1},n}return Object(i.a)(a,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t,a,n,c=this;e.preventDefault(),this.setState({successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&this.props.dispatch((t=this.state.username,a=this.state.email,n=this.state.password,function(e){return I.register(t,a,n).then((function(t){return e({type:x}),e({type:S,payload:t.data.message}),Promise.resolve()}),(function(t){var a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:C}),e({type:S,payload:a}),Promise.reject()}))})).then((function(){c.setState({successful:!0})})).catch((function(){c.setState({successful:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.message;return Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("div",{className:"card card-container",children:[Object(_.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(_.jsxs)(O.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t},children:[!this.state.successful&&Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"username",children:"Username"}),Object(_.jsx)(g.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[P,D]})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"email",children:"Email"}),Object(_.jsx)(g.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[P,U]})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"password",children:"Password"}),Object(_.jsx)(g.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[P,M]})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),t&&Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert",children:t})}),Object(_.jsx)(p.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),a}(n.Component);var V=Object(h.b)((function(e){return{message:e.message.message}}))(J);function H(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var z=a(66).API_BASE_URL+"test/",G=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"getPublicContent",value:function(){return A.a.get(z+"all")}},{key:"getUserBoard",value:function(){return A.a.get(z+"user",{headers:H()})}},{key:"getModeratorBoard",value:function(){return A.a.get(z+"mod",{headers:H()})}},{key:"getAdminBoard",value:function(){return A.a.get(z+"admin",{headers:H()})}}]),e}()),q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;G.getPublicContent().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(_.jsx)("div",{className:"container",children:Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsx)("h3",{children:this.state.content})})})}}]),a}(n.Component),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.user;return e?Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsxs)("h3",{children:[Object(_.jsx)("strong",{children:e.username})," Profile"]})}),Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(_.jsxs)("p",{children:[Object(_.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(_.jsx)("strong",{children:"Authorities:"}),Object(_.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(_.jsx)("li",{children:e},t)}))})]}):Object(_.jsx)(b.a,{to:"/login"})}}]),a}(n.Component);var K=Object(h.b)((function(e){return{user:e.auth.user}}))(Q),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;G.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(_.jsx)("div",{className:"container",children:Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsx)("h3",{children:this.state.content})})})}}]),a}(n.Component),W=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;G.getModeratorBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(_.jsx)("div",{className:"container",children:Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsx)("h3",{children:this.state.content})})})}}]),a}(n.Component),X=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={content:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;G.getAdminBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(_.jsx)("div",{className:"container",children:Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsx)("h3",{children:this.state.content})})})}}]),a}(n.Component),Z=a(66),$=Z.API_BASE_URL+"collection",ee=Z.API_BASE_URL+"collectionCards",te=Z.API_BASE_URL+"epic",ae=Z.API_BASE_URL+"tcgApiQuery",ne=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"getAll",value:function(){return A.a.get($)}},{key:"getEpic",value:function(e){return A.a.get(te,{params:e})}},{key:"getOneDetail",value:function(e){return A.a.get($+"/"+e)}},{key:"postCollection",value:function(e){var t=H();return t.yeet="ass",A.a.post($,e,{headers:t})}},{key:"putCollection",value:function(e,t){return A.a.put($+"/"+e,t).then((function(e){alert("Done!")})).catch((function(e){console.log(e)}))}},{key:"getTcgApiQuery",value:function(e){return A.a.get(ae,{params:{query:e}})}},{key:"deleteCollection",value:function(e){var t=H();return t.yeet="ass",A.a.delete($+"/"+e,{headers:t})}},{key:"patchCollectionCards",value:function(e){var t=H();return A.a.put(ee,{collectionCards:e},{headers:t})}}]),e}()),ce=a(61),se=a.n(ce),re=a(35),oe=a.n(re),ie=(a(114),a(46)),le=a.n(ie),de=(a(56),a(57)),ue=a.n(de),he=(a(124),a(125),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={collections:[]},n.loadCollectionsIntoTable=n.loadCollectionsIntoTable.bind(Object(l.a)(n)),n.optionFormatter=n.optionFormatter.bind(Object(l.a)(n)),n.onDeleteClick=n.onDeleteClick.bind(Object(l.a)(n)),n.onRowClick=n.onRowClick.bind(Object(l.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadCollectionsIntoTable()}},{key:"loadCollectionsIntoTable",value:function(){var e=this;ne.getAll().then((function(t){e.setState({collections:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"onRowClick",value:function(e,t,a){console.log(a)}},{key:"onDeleteClick",value:function(e){var t=this;if(window.confirm("Are you sure you want to delete? "+e.currentTarget.id))return ne.deleteCollection(e.currentTarget.id).then((function(){t.loadCollectionsIntoTable()})).catch((function(e){alert("Error!"),console.log(e)}));console.log("Thing was not saved to the database.")}},{key:"onOpenClick",value:function(e){var t="/collection/"+e.currentTarget.id;window.open(t,"_blank")}},{key:"optionFormatter",value:function(e){var t=this,a=Object(_.jsxs)("span",{children:[Object(_.jsx)("span",{id:e,style:{cursor:"pointer"},onClick:function(e){t.onOpenClick(e)},children:Object(_.jsx)("i",{className:"bi bi-box-arrow-up-right"})}),"\xa0 \xa0",Object(_.jsx)("span",{id:e,style:{cursor:"pointer"},onClick:function(e){t.onDeleteClick(e)},children:Object(_.jsx)("i",{className:"bi bi-trash"})})]});return a}},{key:"render",value:function(){this.state.collections.length>1&&console.log(this.state.collections[0]);var e={onClick:function(e,t,a){var n="/collection/"+t.id;window.open(n,"_blank")}};return Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("header",{className:"jumbotron",children:[Object(_.jsx)("h1",{children:"All Collections"}),Object(_.jsx)(j.b,{to:"/collection/create",className:"btn btn-primary",children:"Create Collection"}),Object(_.jsx)("div",{children:Object(_.jsx)(se.a,{data:this.state.collections,columns:[{dataField:"name",text:"name",sort:!0},{dataField:"collectedCardsUnique",text:"Collected",sort:!0},{dataField:"totalCards",text:"totalCards",sort:!0},{dataField:"status",text:"status",sort:!0,sortFunc:function(e,t,a,n,c,s){return"asc"===a?t-e:e-t},formatter:function(e,t,a,n){return t.statusString}}],keyField:"id",striped:!0,hover:!0,rowEvents:e})})]})})}}]),a}(n.Component));var je=Object(h.b)((function(e){return{}}))(he),be=a(36),me=a(3),Oe=a(30),ve=a(413),ge=a(49),fe=a(38),pe=a(27),xe=a(32),Ce=a(412);a(411);var ke=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).searchTcgApiCard=n.searchTcgApiCard.bind(Object(l.a)(n)),n.changeSearchTerm=n.changeSearchTerm.bind(Object(l.a)(n)),n.changeCollectionName=n.changeCollectionName.bind(Object(l.a)(n)),n.saveCollection=n.saveCollection.bind(Object(l.a)(n)),n.Speeeeeeen=n.Speeeeeeen.bind(Object(l.a)(n)),n.saveAndRedirectClick=n.saveAndRedirectClick.bind(Object(l.a)(n)),n.saveAndCreateAnotherClick=n.saveAndCreateAnotherClick.bind(Object(l.a)(n)),n.state={searchCards:[],searchTerm:"name:blastoise",collectionName:"",isLoading:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"changeSearchTerm",value:function(e){var t=this;this.setState({searchTerm:e.target.value},(function(){console.log(t.state)}))}},{key:"changeCollectionName",value:function(e){var t=this;this.setState({collectionName:e.target.value},(function(){console.log(t.state)}))}},{key:"Speeeeeeen",value:function(){return this.state.isLoading?Object(_.jsx)("div",{style:{display:"flex",alignContent:"center",justifyContent:"center"},children:Object(_.jsx)("div",{style:{display:"inline-block"},children:Object(_.jsx)(Ce.a,{animation:"border",role:"status"})})}):""}},{key:"searchTcgApiCard",value:function(e){var t=this;this.setState({isLoading:!0}),ne.getTcgApiQuery(this.state.searchTerm).then((function(e){e.data;t.setState({searchCards:e.data,isLoading:!1},(function(){console.log(t.state)}))})).catch((function(e){alert("Error."),t.setState({isLoading:!1},(function(){console.log(t.state)}))}))}},{key:"saveAndRedirectClick",value:function(){this.saveCollection().then((function(e){window.location="/collection/"+e.data.id})).catch((function(e){alert(e)}))}},{key:"saveAndCreateAnotherClick",value:function(){this.saveCollection().then((function(e){window.location="/collection/create"})).catch((function(e){alert(e)}))}},{key:"saveCollection",value:function(){if(""!==this.state.collectionName){if(0!==this.state.searchCards.length){var e,t=Object(me.a)({},this.state).searchCards,a=JSON.parse(JSON.stringify(t)),n={name:this.state.collectionName,filter:this.state.searchTerm,cards:[]},c=Object(be.a)(a);try{for(c.s();!(e=c.n()).done;){var s=e.value;n.cards.push({id:s.id,count:0})}}catch(r){c.e(r)}finally{c.f()}return ne.postCollection(n)}alert("No cards to save. Stopping save.")}else alert("CollectionName empty. Stopping save.")}},{key:"render",value:function(){this.state.isLoading;return Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsx)(ge.a,{children:Object(_.jsx)(fe.a,{className:"justify-content-md-center",children:Object(_.jsx)(pe.a,{xs:!0,lg:"5",children:Object(_.jsx)("div",{style:{fontSize:"2.5em",textAlign:"center"},children:"Create Collection"})})})})}),Object(_.jsxs)("section",{style:{marginTop:"20px"},children:[Object(_.jsx)(ge.a,{children:Object(_.jsx)(fe.a,{className:"justify-content-md-center",children:Object(_.jsxs)(pe.a,{xs:!0,lg:"5",children:[Object(_.jsx)(ve.a.Label,{children:"Name"}),Object(_.jsx)(ve.a.Control,{type:"text",placeholder:"Collection Name",value:this.state.collectionName,onChange:this.changeCollectionName})]})})}),Object(_.jsx)(ge.a,{children:Object(_.jsx)(fe.a,{className:"justify-content-md-center",children:Object(_.jsxs)(pe.a,{xs:!0,lg:"5",children:[Object(_.jsx)(ve.a.Label,{children:"Filter"}),Object(_.jsx)(ve.a.Control,{type:"text",placeholder:"example: name:charizard",value:this.state.searchTerm,onChange:this.changeSearchTerm}),Object(_.jsx)(Oe.a,{variant:"primary",type:"submit",onClick:this.searchTcgApiCard,children:"Search"})]})})})]}),Object(_.jsx)("section",{style:{marginTop:"20px"},children:Object(_.jsx)(ge.a,{children:Object(_.jsxs)(fe.a,{className:"justify-content-md-center",children:[Object(_.jsxs)(pe.a,{xs:"12",children:[this.Speeeeeeen(),Object(_.jsx)(Oe.a,{className:"float-right",variant:"primary",type:"submit",onClick:this.saveAndRedirectClick,children:"Save"}),"\xa0",Object(_.jsx)(Oe.a,{className:"float-right",variant:"primary",type:"submit",onClick:this.saveAndCreateAnotherClick,children:"Save And create another"})]}),Object(_.jsxs)(pe.a,{xs:!0,lg:"12",children:[Object(_.jsxs)("div",{children:[this.state.searchCards.length," Cards"]}),Object(_.jsxs)(xe.BootstrapTable,{data:this.state.searchCards,striped:!0,hover:!0,children:[Object(_.jsx)(xe.TableHeaderColumn,{dataField:"id",isKey:!0,dataAlign:"center",dataSort:!0,children:"ID"}),Object(_.jsx)(xe.TableHeaderColumn,{dataField:"name",dataSort:!0,children:"Card No"}),Object(_.jsx)(xe.TableHeaderColumn,{dataField:"fullCardNumber",dataSort:!0,children:"fullCardNumber"}),Object(_.jsx)(xe.TableHeaderColumn,{dataField:"supertype",dataSort:!0,children:"Supertype"}),Object(_.jsx)(xe.TableHeaderColumn,{dataField:"setName",dataSort:!0,children:"setName"}),Object(_.jsx)(xe.TableHeaderColumn,{dataField:"setReleaseDate",dataSort:!0,children:"Release Date"}),Object(_.jsx)(xe.TableHeaderColumn,{dataField:"rarity",dataSort:!0,children:"Rarity"})]})]})]})})})]})}}]),a}(n.Component);var ye=Object(h.b)((function(e){return{}}))(ke),Ne=a(48),Se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleCardCollectedCheckboxClick=n.handleCardCollectedCheckboxClick.bind(Object(l.a)(n)),n.handleSaveCollectionButtonClick=n.handleSaveCollectionButtonClick.bind(Object(l.a)(n)),n.cardCollectedToggle=n.cardCollectedToggle.bind(Object(l.a)(n)),n.state={collection:{collectionCards:[]},collectionId:n.props.id},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;ne.getOneDetail(this.props.id).then((function(t){e.setState({collection:t.data},(function(){console.log(e.state)}))}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"cardCollectedToggle",value:function(e,t,a){return console.log(t.cardId),Object(_.jsx)(Ne.a,{className:"my-0",id:t.cardId,type:"checkbox",variant:"outline-primary",checked:t.count,value:t.count,onClick:this.handleCardCollectedCheckboxClick,data:t.cardId,size:"sm",children:t.count?Object(_.jsx)("i",{className:"bi bi-check2-circle"}):Object(_.jsx)("i",{className:"bi bi-circle"})})}},{key:"handleCardCollectedCheckboxClick",value:function(e){console.log(e.currentTarget.id);var t,a=e.currentTarget.htmlFor,n=Object(me.a)({},this.state).collection,c=n,s=Object(be.a)(n.collectionCards);try{for(s.s();!(t=s.n()).done;){var r=t.value;if(r.cardId===a){r.count=r.count?0:1;break}}}catch(o){s.e(o)}finally{s.f()}this.setState({collection:c})}},{key:"handleSaveCollectionButtonClick",value:function(e){var t,a=Object(me.a)({},this.state).collection,n=JSON.parse(JSON.stringify(a)),c={name:this.state.collection.name},s=new Set(["orderNumber","count","cardId"]),r=Object(be.a)(n.collectionCards);try{for(r.s();!(t=r.n()).done;)for(var o=t.value,i=0,l=Object.keys(o);i<l.length;i++){var d=l[i];s.has(d)||delete o[d]}}catch(u){r.e(u)}finally{r.f()}c.cards=n.collectionCards,ne.putCollection(this.state.collectionId,c)}},{key:"render",value:function(){var e;console.log(this.state.collection);var t=this.state.collection.collectionCards.reduce((function(e,t){return e+Math.min(t,1)}),0);t=this.state.collection.collectionCards.reduce((function(e,t){return e+t.count}),0);var a=0;return this.state.collection.collectionCards.length>0&&(a=t/this.state.collection.collectionCards.length),a*=100,a=Math.round(a,2)+"%",this.state.collection.collectionCards.length,Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("header",{className:"jumbotron",children:Object(_.jsxs)("h1",{children:["Collection ",null===(e=this.state.collection)||void 0===e?void 0:e.name," - ",a]})}),Object(_.jsx)(Oe.a,{onClick:this.handleSaveCollectionButtonClick,children:"Save Collection"}),Object(_.jsx)("div",{})]})}}]),a}(n.Component);Object(h.b)((function(e){return{}}))(Se);var we=a(22),Te=Object(we.b)(),Ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),n=t.call(this,e),e.history.listen((function(){var t=JSON.parse(localStorage.getItem("user"));t&&(1e3*function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}}(t.accessToken).exp<Date.now()&&e.logOut())})),n}return Object(i.a)(a,[{key:"render",value:function(){return Object(_.jsx)("div",{})}}]),a}(n.Component);var Fe=function(e){return Object(_.jsx)("h1",{children:"404"})},Ie=a(62),_e=ie.Search.SearchBar,Ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleCardCollectedCheckboxClick=n.handleCardCollectedCheckboxClick.bind(Object(l.a)(n)),n.handleSaveCollectionButtonClick=n.handleSaveCollectionButtonClick.bind(Object(l.a)(n)),n.handleCardPurchasedCheckboxClick=n.handleCardPurchasedCheckboxClick.bind(Object(l.a)(n)),console.log("------------------"),console.log(n.props),console.log("------------------"),n.state={displaySingleCollection:"id"in n.props,collectionId:n.props.id,collectionName:"",collectionCards:[{id:"ass",setName:"yeet"}],changedCards:new Set,checkChanged:!0,propertyValues:{setNames:{},collectionNames:{}},filters:{}},n.setNameFilter=null,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={};void 0!=this.state.collectionId&&(t={collectionId:this.state.collectionId}),console.log({epicFilter:t}),ne.getEpic(t).then((function(t){var a=Object(Ie.a)(new Set(t.data.map((function(e){return e.setName}))));a.sort();var n={};a.forEach((function(e){n[e]=e}));var c=Object(Ie.a)(new Set(t.data.map((function(e){return e.collectionName}))));c.sort();var s={};c.forEach((function(e){s[e]=e})),e.setState({collectionCards:t.data,propertyValues:{setNames:n,collectionNames:s}},(function(){e.forceUpdate()}))}),(function(e){alert("Error")}))}},{key:"handleCardCollectedCheckboxClick",value:function(e){var t=this,a=e.currentTarget.htmlFor,n=this.state.changedCards,c=this.state.collectionCards.find((function(e){return e.collection_card_key===a}));c.count=c.count?0:1,n.add(a),this.setState({collectionCards:this.state.collectionCards,checkChanged:!this.state.checkChanged,changedCards:n},(function(){console.log("InOnClick: ",t.state.collectionCards[0].count),console.log("InOnClick: ",t.state.checkChanged),console.log("InOnClick: ",t.state.changedCards),t.forceUpdate(),t.handleSaveCollectionButtonClick("test")}))}},{key:"handleCardPurchasedCheckboxClick",value:function(e){var t=this,a=e.currentTarget.htmlFor,n=this.state.collectionCards.find((function(e){return e.collection_card_key===a}));n.purchased=!n.purchased,this.state.changedCards.add(a),this.setState({collectionCards:this.state.collectionCards,checkChanged:!this.state.checkChanged},(function(){t.forceUpdate()}))}},{key:"handleSaveCollectionButtonClick",value:function(e){var t=this,a=Object(me.a)({},this.state).collectionCards,n=Object(Ie.a)(this.state.changedCards).map((function(e){return a.find((function(t){return t.collection_card_key===e}))}));ne.patchCollectionCards(n).then((function(e){t.setState({changedCards:new Set},(function(){t.forceUpdate()}))})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this;this.state.propertyValues.setNames;var t=this.state,a=t.collectionCards,n=t.filters;console.log(this.state.propertyValues.setNames);n.setNameFilter&&n.setNameFilter.filterVal;var c=[{dataField:"collectionName",text:"collection name",searchable:!0,filter:Object(re.selectFilter)({options:this.state.propertyValues.collectionNames}),sort:!0},{dataField:"numberFull",text:"number",searchable:!0,headerStyle:function(e,t){return{width:"6em"}},sort:!0},{dataField:"cardId",text:"cardId",searchable:!0,hidden:!0,sort:!0},{dataField:"name",text:"name",searchable:!0,sort:!0},{dataField:"rarity",text:"rarity",searchable:!0,sort:!0,headerStyle:function(e,t){return{width:"10em"}}},{dataField:"setName",text:"setName",searchable:!0,style:function(e,t){return{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},sort:!0,filter:Object(re.selectFilter)({options:this.state.propertyValues.setNames})},{dataField:"setReleaseDate",text:"release date",searchable:!0,sort:!0,headerStyle:function(e,t){return{width:"7em"}}},{dataField:"collection_card_key",text:"collection_card_key",hidden:!0,sort:!0},{dataField:"orderNumber",text:"col",headerStyle:function(e,t){return{width:"3em"}},sort:!0},{dataField:"binderPageNo",text:"pg",headerStyle:function(e,t){return{width:"3em"}},sort:!0},{dataField:"binderSlotNo",text:"slot",headerStyle:function(e,t){return{width:"3em"}},sort:!0},{dataField:"count",text:"Collected",filter:Object(re.selectFilter)({options:[{value:0,label:"N"},{value:1,label:"Y"}]}),headerStyle:function(e,t){return{width:"7em"}},formatExtraData:{collectionCards:this.state.collectionCards,changed:this.state.checkChanged},formatter:function(t,a,n,c){var s=c.collectionCards.find((function(e){return e.collection_card_key===a.collection_card_key}));return Object(_.jsx)(Ne.a,{className:"my-0",id:a.collection_card_key,type:"checkbox",variant:"outline-primary",checked:1==s.count,value:s.count,onClick:e.handleCardCollectedCheckboxClick,data:a.cardId,size:"sm",children:s.count?Object(_.jsx)("i",{className:"bi bi-check-circle-fill"}):Object(_.jsx)("i",{class:"bi bi-circle"})})}},{dataField:"purchased",text:"purchased",filter:Object(re.selectFilter)({options:[{value:!1,label:"N"},{value:!0,label:"Y"}]}),headerStyle:function(e,t){return{width:"7em"}},formatExtraData:{collectionCards:this.state.collectionCards,changed:this.state.checkChanged},formatter:function(t,a,n,c){var s=c.collectionCards.find((function(e){return e.collection_card_key===a.collection_card_key}));return Object(_.jsx)(Ne.a,{className:"my-0",id:a.collection_card_key,type:"checkbox",variant:"outline-primary",checked:s.purchased,value:s.purchased,onClick:e.handleCardPurchasedCheckboxClick,data:a.cardId,size:"sm",children:s.purchased?Object(_.jsx)("i",{className:"bi bi-check-circle-fill"}):Object(_.jsx)("i",{class:"bi bi-circle"})})}}],s="";this.state.propertyValues.collectionNames!={}&&(s=Object.keys(this.state.propertyValues.collectionNames)[0]);var r=0,o=this.state.collectionCards.reduce((function(e,t){return e+t.count}),0);return this.state.collectionCards.length>0&&(r=o/this.state.collectionCards.length),r*=100,r=Math.round(r,2)+"%",Object(_.jsxs)("div",{className:"container-fluid",children:[Object(_.jsx)("header",{className:"jumbotron",children:this.state.displaySingleCollection?Object(_.jsxs)("h1",{children:["Collection ",s," - ",r]}):null}),Object(_.jsxs)(fe.a,{children:[Object(_.jsx)(pe.a,{classNames:"col-md-auto",children:Object(_.jsx)("h3",{children:"Search for cards:"})}),Object(_.jsx)(pe.a,{xs:1,children:Object(_.jsx)(Oe.a,{variant:"primary",onClick:this.handleSaveCollectionButtonClick,children:"Save"})})]}),Object(_.jsx)(le.a,{data:a,columns:c,keyField:"collection_card_key",striped:!0,hover:!0,exportCSV:{fileName:"custom.csv",separator:"|",ignoreHeader:!0,noAutoBOM:!1},condensed:!0,search:!0,children:function(t){return Object(_.jsxs)("div",{children:[Object(_.jsx)(_e,Object(me.a)({},t.searchProps)),Object(_.jsx)("hr",{}),Object(_.jsx)(se.a,Object(me.a)(Object(me.a)({},t.baseProps),{},{srText:"sss",formatExtraData:e.state.collectionCards,filter:oe()(),pagination:ue()({sizePerPageList:[{text:"10",value:10},{text:"30",value:30},{text:"All",value:e.state.collectionCards.length}]})}))]})}})]})}}]),a}(n.Component);var Le=Object(h.b)((function(e){return{}}))(Ee);var Be=function(e){var t=Object(b.h)().collectionid;return Object(_.jsx)(Le,{collectionid:t})};var Re=function(e){var t=Object(b.h)().id;return Object(_.jsx)(Le,{id:t})},Pe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).logOut=n.logOut.bind(Object(l.a)(n)),n.state={showModeratorBoard:!1,showAdminBoard:!1,currentUser:void 0},Te.listen((function(t){e.dispatch({type:w})})),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.user;e&&(console.log(e.roles),this.setState({currentUser:e,showModeratorBoard:e.roles.includes("ROLE_MODERATOR"),showAdminBoard:e.roles.includes("ROLE_ADMIN")}))}},{key:"logOut",value:function(){this.props.dispatch((function(e){I.logout(),e({type:N})})),this.setState({showModeratorBoard:!1,showAdminBoard:!1,currentUser:void 0})}},{key:"render",value:function(){var e=this.state,t=e.currentUser,a=(e.showModeratorBoard,e.showAdminBoard,this.props.user);return console.log(null===a||void 0===a?void 0:a.roles),console.log("haha"),Object(_.jsx)(j.a,{history:Te,children:Object(_.jsxs)("div",{children:[Object(_.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(_.jsx)(j.b,{to:"/",className:"navbar-brand",children:"bezKoder"}),Object(_.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/home",className:"nav-link",children:"Home"})}),(null===a||void 0===a?void 0:a.roles.includes("ROLE_MODERATOR"))&&Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/mod",className:"nav-link",children:"Moderator Board"})}),(null===a||void 0===a?void 0:a.roles.includes("ROLE_ADMIN"))&&Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/admin",className:"nav-link",children:"Admin Board"})}),Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/collections",className:"nav-link",children:"Collections"})}),t&&Object(_.jsx)(c.a.Fragment,{children:Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/epic",className:"nav-link",children:"Epic"})})})]}),t?Object(_.jsxs)("div",{className:"navbar-nav ml-auto",style:{marginLeft:"auto"},children:[Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/profile",className:"nav-link",children:t.username})}),Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/user",className:"nav-link",children:"User"})}),Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)("a",{href:"/login",className:"nav-link",onClick:this.logOut,children:"LogOut"})})]}):Object(_.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(_.jsx)("li",{className:"nav-item",children:Object(_.jsx)(j.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(_.jsx)("div",{className:"mt-3",children:Object(_.jsxs)(b.d,{children:[Object(_.jsx)(b.b,{exact:!0,path:"/",element:Object(_.jsx)(q,{})}),Object(_.jsx)(b.b,{exact:!0,path:"/home",element:Object(_.jsx)(q,{})}),Object(_.jsx)(b.b,{exact:!0,path:"/login",element:Object(_.jsx)(B,{})}),Object(_.jsx)(b.b,{exact:!0,path:"/register",element:Object(_.jsx)(V,{})}),Object(_.jsx)(b.b,{exact:!0,path:"/profile",element:Object(_.jsx)(K,{})}),Object(_.jsx)(b.b,{path:"/user",element:Object(_.jsx)(Y,{})}),Object(_.jsx)(b.b,{path:"/mod",element:Object(_.jsx)(W,{})}),Object(_.jsx)(b.b,{path:"/admin",element:Object(_.jsx)(X,{})}),Object(_.jsx)(b.b,{path:"/collections",element:Object(_.jsx)(je,{})}),Object(_.jsx)(b.b,{path:"/collection/create",element:Object(_.jsx)(ye,{})}),Object(_.jsx)(b.b,{path:"/collection/:id",element:Object(_.jsx)(Re,{})}),Object(_.jsx)(b.b,{path:"/epic",element:Object(_.jsx)(Be,{})}),Object(_.jsx)(b.b,{path:"*",element:Object(_.jsx)(Fe,{})})]})}),Object(_.jsx)(Ae,{logOut:this.logOut,history:Te})]})})}}]),a}(n.Component);var Ue=Object(h.b)((function(e){return{user:e.auth.user}}))(Pe),De=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,414)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},Me=a(40),Je=a(156),Ve=a(157),He=JSON.parse(localStorage.getItem("user")),ze=He?{isLoggedIn:!0,user:He}:{isLoggedIn:!1,user:null},Ge={},qe=Object(Me.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case x:case C:return Object(me.a)(Object(me.a)({},e),{},{isLoggedIn:!1});case k:return Object(me.a)(Object(me.a)({},e),{},{isLoggedIn:!0,user:n.user});case y:case N:return Object(me.a)(Object(me.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case S:return{message:n};case w:return{message:""};default:return e}}}),Qe=[Ve.a],Ke=Object(Me.createStore)(qe,Object(Je.composeWithDevTools)(Me.applyMiddleware.apply(void 0,Qe)));r.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(h.a,{store:Ke,children:Object(_.jsx)(Ue,{})})}),document.getElementById("root")),De()},66:function(e,t){e.exports={API_BASE_URL:"http://docker.tomekwaller.com:8080/api/"}}},[[409,1,2]]]);
//# sourceMappingURL=main.3a2eccf7.chunk.js.map